(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9836:function(e,t,s){Promise.resolve().then(s.bind(s,1134))},1134:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var a=s(3827),r=s(4090);function o(e){let{product:t,isFavorite:s,onToggleFavorite:r,onAddToCart:o,onProductClick:n}=e,l=Number(t.price||0),i=Number(t.estoque||0),d=i>0;return(0,a.jsxs)("div",{className:"flex flex-col bg-white rounded-2xl shadow-md overflow-hidden relative h-full hover:shadow-lg transition-shadow group",children:[(0,a.jsxs)("div",{className:"absolute top-2 left-2 z-20 flex flex-col gap-1 pointer-events-none",children:[!d&&(0,a.jsx)("span",{className:"bg-red-500 text-white text-[10px] font-bold px-2 py-1 rounded-full",children:"Esgotado"}),d&&i<5&&(0,a.jsx)("span",{className:"bg-orange-400 text-white text-[10px] font-bold px-2 py-1 rounded-full",children:"Estoque baixo!"})]}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),r?r(t.id):console.warn("onToggleFavorite not provided")},className:"absolute top-2 right-2 z-20 bg-white/80 p-1.5 rounded-full shadow-sm hover:bg-white transition cursor-pointer active:scale-90",title:"Favoritar",children:s?"❤️":"\uD83E\uDD0D"}),(0,a.jsx)("div",{onClick:()=>null==n?void 0:n(t),className:"w-full h-40 bg-gray-100 relative cursor-pointer overflow-hidden",children:(0,a.jsx)("img",{src:t.imagem||"https://via.placeholder.com/150",alt:t.nome,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110 ".concat(d?"":"grayscale")})}),(0,a.jsxs)("div",{className:"p-3 flex flex-col flex-grow justify-between",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-800 text-sm mb-1 line-clamp-2 leading-tight",children:t.nome}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("p",{className:"text-lg font-bold text-[#FF4B82]",children:["R$ ",l.toFixed(2)]}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),o?o(t):(console.error("onAddToCart function is missing!"),alert("Erro interno: Fun\xe7\xe3o de carrinho indispon\xedvel."))},disabled:!d,className:"w-full mt-2 py-2 rounded-lg font-bold text-sm transition-all active:scale-95 ".concat(d?"bg-gradient-to-r from-[#FF4B82] to-[#FF9E3D] text-white hover:opacity-90 shadow-md shadow-orange-100":"bg-gray-200 text-gray-400 cursor-not-allowed"),children:d?"+ Adicionar":"Indispon\xedvel"})]})]})]})}function n(){return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-[70vh] w-full bg-[#F5F6FA]",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-32 h-32 bg-white rounded-full p-2 shadow-xl animate-bounce z-10 relative",children:(0,a.jsx)("img",{src:"https://scontent.fbfh15-1.fna.fbcdn.net/v/t39.30808-6/553847420_122119716686977479_5765612005474135840_n.jpg?_nc_cat=106&ccb=1-7&_nc_sid=6ee11a&_nc_eui2=AeGYoc5isZ54tqRS9amnP5SCrZ2LrwbPbzetnYuvBs9vN1G5RcQEGZRDdeCL9Q99nvGeMO_CB1dFMf07RkNxEJTE&_nc_ohc=hcHJayRqLZ4Q7kNvwEPwg3T&_nc_oc=AdlpVEklIt7p0ps6yE1IGlHMOcxHdaXJvYQaG3QYos4E_VYesJEuk2vVH1l8uSHny-KqJTyQlfy6VoKp3_kP54OU&_nc_zt=23&_nc_ht=scontent.fbfh15-1.fna&_nc_gid=oFWMehzimRYe6j488AFUpA&oh=00_AfgFXpSoIwMCbAqJFqThZeoRNbaCVMVezlapdk23SbxRmA&oe=6927E03A",alt:"Carregando...",className:"w-full h-full object-cover rounded-full border-2 border-[#FF9E3D]"})}),(0,a.jsx)("div",{className:"absolute -bottom-4 left-1/2 transform -translate-x-1/2 w-20 h-4 bg-black/10 rounded-[100%] blur-sm animate-pulse"})]}),(0,a.jsx)("h3",{className:"mt-8 text-lg font-bold text-[#FF4B82] animate-pulse tracking-wide",children:"Carregando del\xedcias..."})]})}var l=s(703);function i(e){let{imageUrl:t,altText:s,title:r,subtitle:o,ctaText:n,onCtaClick:i,priority:d=!1}=e;return(0,a.jsx)("div",{className:"w-full relative overflow-hidden rounded-2xl shadow-lg my-6",children:(0,a.jsxs)("div",{className:"relative w-full aspect-video md:aspect-[3/1] bg-gradient-to-r from-[#FF4B82] to-[#FF9E3D]",children:[(0,a.jsx)(l.default,{src:t,alt:s,fill:!0,priority:d,className:"object-cover mix-blend-overlay opacity-90",sizes:"(max-width: 768px) 100vw, 80vw"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent pointer-events-none"}),(0,a.jsxs)("div",{className:"absolute inset-0 flex flex-col justify-center items-center text-center p-6 z-10",children:[(0,a.jsx)("h2",{className:"text-3xl md:text-5xl font-bold text-white drop-shadow-md mb-2 max-w-prose leading-tight",children:r}),o&&(0,a.jsx)("p",{className:"text-white/95 text-base md:text-lg mb-6 font-medium drop-shadow-sm max-w-md",children:o}),(0,a.jsx)("button",{onClick:i,className:"px-8 py-3 bg-white text-[#FF4B82] font-bold rounded-full shadow-lg hover:shadow-xl hover:scale-105 active:scale-95 transition-all duration-300 uppercase tracking-wide text-sm md:text-base",children:n})]})]})})}function d(e){let{user:t,products:s,categories:l,banners:d,favorites:c,onAddToCart:x,onToggleFavorite:m,onProductClick:u,onHeaderAction:h}=e,[g,p]=(0,r.useState)("todos"),[b,f]=(0,r.useState)(""),v=(s||[]).filter(e=>{var t;let s=e.nome||e.Nome_Geladinho||"";if(!s)return!1;let a=s.toLowerCase().includes(b.toLowerCase()),r="todos"===g||(null===(t=e.categoriaId||e.ID_Categoria)||void 0===t?void 0:t.toString())===g;return a&&r});if(!s||0===s.length)return(0,a.jsx)(n,{});let j=()=>{let e=document.getElementById("products-grid");e&&e.scrollIntoView({behavior:"smooth"})};return(0,a.jsxs)("div",{className:"min-h-screen bg-[#F5F6FA] pb-24",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-[#FF4B82] to-[#FF9E3D] pt-12 pb-24 px-6 rounded-b-[40px]",children:(0,a.jsxs)("div",{className:"flex justify-between items-start text-white",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm opacity-90",children:"Bem-vindo(a)!"}),(0,a.jsx)("h2",{className:"text-2xl font-bold",children:(null==t?void 0:t.name)||"Dona Capivara"})]}),(0,a.jsx)("button",{onClick:h,className:"bg-white/20 backdrop-blur-sm p-2 rounded-full hover:bg-white/30 transition flex items-center justify-center w-10 h-10 shadow-sm",title:(null==t?void 0:t.isGuest)?"Fazer Login":"Sair da Conta",children:(null==t?void 0:t.isGuest)?(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDD10"}):(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDEAA"})})]})}),(0,a.jsx)("div",{className:"-mt-8 mx-6 relative z-20",children:(0,a.jsxs)("div",{className:"bg-white rounded-full shadow-lg flex items-center p-4",children:[(0,a.jsx)("span",{className:"text-gray-400 mr-2",children:"\uD83D\uDD0D"}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar geladinho...",className:"flex-1 outline-none text-gray-700 bg-transparent",value:b,onChange:e=>f(e.target.value)})]})}),(0,a.jsx)("div",{className:"mx-6",children:d&&d.length>0?(0,a.jsx)(i,{imageUrl:d[0].image,altText:d[0].title,title:d[0].title,subtitle:d[0].subtitle,ctaText:d[0].ctaText,onCtaClick:j,priority:!0}):(0,a.jsx)(i,{imageUrl:"https://img.freepik.com/free-vector/flat-design-food-sale-banner_23-2149137947.jpg",altText:"Banner Padr\xe3o",title:"Bem-vindo \xe0 Dona Capivara",subtitle:"Os melhores geladinhos da cidade!",ctaText:"Ver Card\xe1pio",onCtaClick:j})}),!(null==t?void 0:t.isGuest)&&(0,a.jsx)("div",{className:"mx-6 mb-6 bg-white p-4 rounded-2xl shadow-sm border-l-4 border-[#FF4B82] flex justify-between items-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-sm text-gray-800",children:"Clube Capivara"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Voc\xea tem ",(0,a.jsx)("span",{className:"text-[#FF4B82] font-bold",children:(null==t?void 0:t.points)||0})," pontos"]})]})}),(0,a.jsxs)("div",{className:"flex gap-3 overflow-x-auto px-6 pb-4 scrollbar-hide",children:[(0,a.jsx)("button",{onClick:()=>p("todos"),className:"px-6 py-2 rounded-full whitespace-nowrap font-bold text-sm transition-all ".concat("todos"===g?"bg-[#FF4B82] text-white shadow-md":"bg-white text-gray-500 border border-gray-100"),children:"\uD83D\uDD25 Todos"}),l.map(e=>(0,a.jsx)("button",{onClick:()=>p(e.id),className:"px-6 py-2 rounded-full whitespace-nowrap font-bold text-sm transition-all ".concat(g===e.id?"bg-[#FF4B82] text-white shadow-md":"bg-white text-gray-500 border border-gray-100"),children:e.nome},e.id))]}),(0,a.jsx)("div",{id:"products-grid",className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 px-6 mt-4",children:v.map(e=>(0,a.jsx)(o,{product:e,isFavorite:c.includes(e.id),onToggleFavorite:m,onAddToCart:x,onProductClick:u},e.id))})]})}function c(e){let{cart:t,user:s,addToCart:o,removeFromCart:n,onSubmitOrder:l}=e,[i,d]=(0,r.useState)(""),[c,x]=(0,r.useState)(0),[m,u]=(0,r.useState)(""),[h,g]=(0,r.useState)("CONDO"),[p,b]=(0,r.useState)({nome:"",torre:"",apto:"",rua:"",numero:"",bairro:"",complemento:""});(0,r.useEffect)(()=>{if(s&&!s.isGuest){let e=s.name||"",t=s.savedAddress||{};b(s=>({...s,nome:e,torre:t.torre||"",apto:t.apto||""})),t.torre&&g("CONDO")}},[s]),(0,r.useEffect)(()=>{i.length>3?x(50):x(0)},[i]);let f=t.reduce((e,t)=>e+t.price*t.quantity,0),v="FAR"===h?5:0,j=f+v,N=Math.floor(j)+c,w=e=>b({...p,[e.target.name]:e.target.value});return(0,a.jsxs)("div",{className:"min-h-screen bg-[#F5F6FA] pb-32",children:[(0,a.jsxs)("div",{className:"bg-white p-6 shadow-sm sticky top-0 z-10",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-[#2D3436]",children:"Meu Carrinho"}),(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:[t.length," itens"]})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[0===t.length?(0,a.jsx)("div",{className:"text-center py-10 text-gray-400",children:"Carrinho vazio"}):t.map(e=>(0,a.jsxs)("div",{className:"bg-white p-4 rounded-2xl shadow-sm flex gap-4 items-center",children:[(0,a.jsx)("img",{src:e.imagem||"https://via.placeholder.com/80",alt:e.nome,className:"w-16 h-16 rounded-xl object-cover bg-gray-100"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-800 text-sm line-clamp-1",children:e.nome}),(0,a.jsxs)("p",{className:"text-[#FF4B82] font-bold",children:["R$ ",e.price.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 bg-gray-50 rounded-lg px-2 py-1",children:[(0,a.jsx)("button",{onClick:()=>n(e.id),className:"text-gray-400 font-bold px-2",children:"-"}),(0,a.jsx)("span",{className:"text-sm font-bold",children:e.quantity}),(0,a.jsx)("button",{onClick:()=>o(e),className:"text-[#FF4B82] font-bold px-2",children:"+"})]})]},e.id)),t.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-2xl shadow-sm",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-700 mb-3",children:"Entrega"}),(0,a.jsx)("div",{className:"grid gap-3",children:[{id:"CONDO",icon:"\uD83C\uDFE2",label:"Condom\xednio",sub:"Gr\xe1tis"},{id:"NEIGHBOR",icon:"\uD83C\uDFE1",label:"Vizinhan\xe7a",sub:"Gr\xe1tis"},{id:"FAR",icon:"\uD83D\uDEF5",label:"Outros",sub:"R$ 5,00"}].map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>g(e.id),className:"p-3 rounded-xl border text-left flex items-center gap-3 transition-all ".concat(h===e.id?"border-[#FF4B82] bg-[#FFF0F5]":"border-gray-200"),children:[(0,a.jsx)("span",{className:"text-2xl",children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-sm text-gray-800",children:e.label}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.sub})]})]},e.id))})]}),(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!m)return alert("Selecione uma forma de pagamento");let s="";s="CONDO"===h?"Condom\xednio - Torre ".concat(p.torre,", Apto ").concat(p.apto):"".concat(p.rua,", ").concat(p.numero," - ").concat(p.bairro," (").concat("NEIGHBOR"===h?"Vizinhan\xe7a":"Entrega Externa",")"),l({cart:t,total:j,referralCode:i,bonusPoints:c,paymentMethod:m,deliveryFee:v,customer:{name:p.nome,fullAddress:s,details:p}})},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-2xl shadow-sm space-y-4 w-full",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-700",children:"Dados"}),(0,a.jsx)("label",{className:"text-xs font-bold text-gray-400 ml-1 uppercase",children:"Como gostaria de ser chamado?"}),(0,a.jsx)("input",{required:!0,name:"nome",placeholder:"Ex: Jo\xe3o da Silva",value:p.nome,onChange:w,className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl text-sm outline-none focus:border-[#FF4B82]"}),"CONDO"===h?(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsx)("input",{required:!0,name:"torre",placeholder:"Torre",value:p.torre,onChange:w,className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl text-sm outline-none focus:border-[#FF4B82]"}),(0,a.jsx)("input",{required:!0,name:"apto",placeholder:"Apto",value:p.apto,onChange:w,className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl text-sm outline-none focus:border-[#FF4B82]"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,a.jsx)("input",{required:!0,name:"rua",placeholder:"Rua",value:p.rua,onChange:w,className:"col-span-2 p-3 bg-gray-50 border border-gray-200 rounded-xl text-sm outline-none focus:border-[#FF4B82]"}),(0,a.jsx)("input",{required:!0,name:"numero",placeholder:"N\xba",value:p.numero,onChange:w,className:"col-span-1 p-3 bg-gray-50 border border-gray-200 rounded-xl text-sm outline-none focus:border-[#FF4B82]"})]}),(0,a.jsx)("input",{required:!0,name:"bairro",placeholder:"Bairro",value:p.bairro,onChange:w,className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl text-sm outline-none focus:border-[#FF4B82]"})]}),(0,a.jsxs)("div",{className:"mt-4 bg-[#FFF8E1] border border-[#FFE082] p-3 rounded-xl",children:[(0,a.jsx)("input",{type:"text",placeholder:"C\xf3digo de Indica\xe7\xe3o (Opcional)",value:i,onChange:e=>d(e.target.value),className:"w-full bg-white border border-[#FFE082] rounded-lg p-2 text-sm outline-none focus:ring-2 focus:ring-[#FFB300]"}),c>0&&(0,a.jsxs)("div",{className:"text-[#F57F17] text-xs font-bold mt-1",children:["✨ +",c," pontos!"]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-2xl shadow-sm space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between text-gray-500",children:[(0,a.jsx)("span",{children:"Subtotal"}),(0,a.jsxs)("span",{children:["R$ ",f.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-gray-500",children:[(0,a.jsx)("span",{children:"Entrega"}),(0,a.jsx)("span",{className:0===v?"text-[#28a745]":"text-red-500",children:0===v?"Gr\xe1tis":"R$ ".concat(v.toFixed(2))})]}),(0,a.jsxs)("div",{className:"border-t border-gray-100 my-2 pt-2 flex justify-between text-lg font-bold text-[#2D3436]",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{children:["R$ ",j.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"bg-[#FFF0F5] text-[#FF4B82] text-center py-2 rounded-lg font-bold text-xs",children:["\uD83D\uDC8E Ganhe ",N," pontos"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["PIX","Cart\xe3o","Dinheiro"].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>u(e),className:"py-3 rounded-xl text-sm font-bold border ".concat(m===e?"bg-[#FF4B82] text-white border-[#FF4B82]":"bg-white text-gray-500 border-gray-200"),children:e},e))}),(0,a.jsx)("button",{type:"submit",disabled:!m,className:"w-full bg-gradient-to-r from-[#FF4B82] to-[#FF9E3D] text-white font-bold py-4 rounded-2xl shadow-lg shadow-orange-200 mt-6 disabled:opacity-50",children:"Finalizar Pedido"})]})]})]})]})}function x(e){let{user:t,onLogout:s,onNavigate:r}=e,o=t||{name:"Visitante",phone:"",points:0},n=isNaN(o.points)?0:o.points,l=o.inviteCode||"...",i=n>=1e3?{name:"\uD83D\uDC8E Platina",color:"from-cyan-400 to-blue-500",next:1e4,max:!0}:n>=500?{name:"\uD83D\uDC51 Ouro",color:"from-yellow-400 to-yellow-600",next:1e3,max:!1}:n>=200?{name:"\uD83E\uDD48 Prata",color:"from-gray-300 to-gray-500",next:500,max:!1}:{name:"\uD83E\uDD49 Bronze",color:"from-orange-300 to-orange-500",next:200,max:!1},d=i.max?100:Math.min(100,n/i.next*100);return(0,a.jsxs)("div",{className:"min-h-screen bg-[#F5F6FA] pb-24",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-[#FF4B82] to-[#FF9E3D] text-white pt-10 pb-24 px-6 rounded-b-[40px] shadow-lg",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white/80 text-sm font-medium",children:"Bem-vindo(a)"}),(0,a.jsx)("h1",{className:"text-3xl font-bold mt-1",children:o.name}),(0,a.jsx)("p",{className:"text-white/70 text-xs mt-1",children:o.phone})]}),(0,a.jsx)("button",{onClick:s,className:"bg-white/20 p-2 rounded-full hover:bg-white/30 transition",children:"⚙️"})]})}),(0,a.jsxs)("div",{className:"mx-6 -mt-16 bg-white rounded-2xl shadow-xl p-5 relative z-10",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsx)("span",{className:"text-lg font-bold bg-gradient-to-r ".concat(i.color," bg-clip-text text-transparent"),children:i.name}),(0,a.jsxs)("span",{className:"text-[#FF9E3D] font-bold text-xl",children:[n," ",(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"pts"})]})]}),(0,a.jsx)("div",{className:"w-full h-3 bg-gray-100 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r ".concat(i.color," transition-all duration-1000"),style:{width:"".concat(d,"%")}})})]}),(0,a.jsxs)("div",{className:"mx-6 mt-4 bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-100 rounded-2xl p-4 flex flex-col items-center text-center shadow-sm",children:[(0,a.jsx)("h3",{className:"text-[#FF4B82] font-bold text-sm mb-1",children:"\uD83C\uDF81 Ganhe 50 pontos!"}),(0,a.jsx)("p",{className:"text-gray-500 text-xs mb-3",children:"Indique amigos e ganhem juntos na 1\xaa compra."}),(0,a.jsxs)("button",{onClick:()=>{navigator.clipboard&&(navigator.clipboard.writeText(l),alert("C\xf3digo copiado! Envie para seus amigos."))},className:"flex items-center gap-3 bg-white px-6 py-3 rounded-xl border border-dashed border-[#FF4B82] active:scale-95 transition shadow-sm w-full justify-center",children:[(0,a.jsx)("span",{className:"font-mono font-bold text-lg text-gray-700 tracking-widest",children:l}),(0,a.jsx)("span",{className:"text-xs bg-[#FF4B82] text-white px-2 py-1 rounded",children:"COPIAR"})]})]}),(0,a.jsxs)("div",{className:"px-6 space-y-3 mt-6",children:[(0,a.jsxs)("a",{href:"https://wa.me/5541991480096?text=Ol%C3%A1%20Dona%20Capivara!%20Preciso%20de%20ajuda.",target:"_blank",rel:"noopener noreferrer",className:"w-full bg-white p-4 rounded-2xl shadow-sm flex justify-between items-center hover:bg-green-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-green-500",children:"\uD83D\uDCAC"}),(0,a.jsx)("span",{className:"text-gray-700 font-medium text-sm",children:"Falar no WhatsApp"})]}),(0,a.jsx)("span",{className:"text-gray-300",children:"›"})]}),(0,a.jsxs)("button",{onClick:()=>r("orders"),className:"w-full bg-white p-4 rounded-2xl shadow-sm flex justify-between items-center hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-[#FF4B82]",children:"\uD83D\uDCE6"}),(0,a.jsx)("span",{className:"text-gray-700 font-medium text-sm",children:"Meus Pedidos"})]}),(0,a.jsx)("span",{className:"text-gray-300",children:"›"})]}),(0,a.jsx)("button",{onClick:s,className:"w-full bg-white p-4 rounded-2xl shadow-sm flex justify-between items-center hover:bg-red-50 mt-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-red-400",children:"\uD83D\uDEAA"}),(0,a.jsx)("span",{className:"text-red-500 font-medium text-sm",children:"Sair da Conta"})]})})]})]})}function m(e){let{products:t,favorites:s,onAddToCart:r,onToggleFavorite:n,onProductClick:l}=e,i=t.filter(e=>s.includes(e.id));return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",style:{paddingBottom:"80px"},children:[(0,a.jsx)("header",{className:"bg-gradient-to-r from-[#FF4B82] to-[#FF9E3D] pt-12 pb-8 px-6 rounded-b-[40px]",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white text-sm opacity-90 mb-1",children:"Seus Favoritos"}),(0,a.jsxs)("h2",{className:"text-white text-2xl font-bold",children:["❤️ ",i.length," ",1===i.length?"item":"itens"]})]})}),0===i.length?(0,a.jsxs)("div",{className:"text-center py-20 px-6",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDC94"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"Nenhum favorito ainda"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Toque no ♥ nos produtos para adicion\xe1-los aos favoritos!"})]}):(0,a.jsxs)("div",{className:"mt-6 px-6 pb-24",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-gray-800 mb-4",children:"Seus Geladinhos Favoritos"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:i.map(e=>(0,a.jsx)(o,{product:e,onAddToCart:r,onToggleFavorite:n,onProductClick:l,isFavorite:!0},e.id))})]})]})}let u="https://script.google.com/macros/s/AKfycbwtm0vUrRRAqgYJjE4nK05KpWn91m1gVJ2nImoeb4nupsOmLfLwFACpjftlWD7JXxdg2A/exec",h={async fetchCatalogData(){try{if(!u)throw Error("API URL missing");let[e,t,s]=await Promise.all([fetch("".concat(u,"?action=getProducts")),fetch("".concat(u,"?action=getCategories")),fetch("".concat(u,"?action=getBanners"))]),a=await e.json(),r=await t.json(),o=await s.json(),n=a.map(e=>({id:e.ID_Geladinho,nome:e.Nome_Geladinho||e.Nome||e.nome||"Produto sem nome",price:Number(e.Preco_Venda||0),imagem:e.URL_IMAGEM_CACHE||e.Imagem_Geladinho||"",estoque:Number(e[" Estoque_Atual"]||e.Estoque_Atual||0),categoriaId:e.ID_Categoria,descricao:e.Descricao,peso:e.Peso||"120g",calorias:e.Calorias||"N/A",ingredientes:e.Ingredientes||"Ingredientes n\xe3o informados.",tempo:e.Tempo_Preparo||"Pronta Entrega"})),l=r.map(e=>({id:e.ID_Categoria,nome:e.Nome_Categoria})),i=Array.isArray(o)?o.map(e=>({id:e.ID_Banner,image:e.Imagem_URL||e.Imagem,title:e.Titulo||"",subtitle:e.Subtitulo||"",ctaText:e.Texto_Botao||"Ver Mais"})):[];return{products:n,categories:l,banners:i}}catch(e){return console.error("Sync Error",e),{products:[],categories:[],banners:[]}}},async login(e,t){if(!u)return{success:!1,message:"Config Error"};try{let s=await fetch(u+"?action=loginCustomer",{method:"POST",body:JSON.stringify({phone:e,password:t})}),a=await s.json();if(a.success&&a.customer){let e=a.customer.Favoritos||"",t=e?e.split(","):[];a.customer={id:a.customer.ID_Cliente,name:a.customer.Nome,phone:a.customer.Telefone,points:Number(a.customer.Pontos_Fidelidade||0),inviteCode:a.customer.Codigo_Convite||"---",favorites:t,isGuest:!1,savedAddress:{torre:a.customer.Torre||"",apto:a.customer.Apartamento||"",fullAddress:a.customer.Endereco||""}}}return a}catch(e){return{success:!1,message:"Erro de conex\xe3o"}}},async registerCustomer(e){if(!u)return{success:!1,message:"Config Error"};try{let t=await fetch(u+"?action=createCustomer",{method:"POST",body:JSON.stringify(e)});return await t.json()}catch(e){return{success:!1,message:"Erro de conex\xe3o"}}},async syncFavorites(e,t){if(u)try{await fetch(u+"?action=updateFavorites",{method:"POST",body:JSON.stringify({phone:e,favorites:t.join(",")})})}catch(e){}},async submitOrder(e){if(u)try{return await fetch(u+"?action=createOrder",{method:"POST",body:JSON.stringify(e)}),{success:!0}}catch(e){return{success:!1}}},async getCustomerOrders(e){if(!u)return[];try{let t=await fetch("".concat(u,"?action=getOrders&customerId=").concat(e));return(await t.json()).map(e=>({id:e.ID_Venda,date:e.Data_Venda,total:Number(e.Total_Venda||0),status:e.Status||"Pendente",paymentMethod:e.Forma_de_Pagamento||"N\xe3o informado"}))}catch(e){return[]}}};function g(e){let{message:t,type:s="success",isVisible:o,onClose:n}=e;return((0,r.useEffect)(()=>{if(o){let e=setTimeout(()=>{n()},3e3);return()=>clearTimeout(e)}},[o,t,n]),o)?(0,a.jsx)("div",{className:"fixed top-6 left-1/2 transform -translate-x-1/2 z-[100] animate-in slide-in-from-top-5 fade-in duration-300 w-auto max-w-[90%]",children:(0,a.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm px-6 py-3 rounded-full shadow-2xl flex items-center gap-3 border-l-4 ".concat({success:"border-l-[#00C851]",error:"border-l-[#ff4444]",info:"border-l-[#FF4B82]"}[s]),children:[(0,a.jsx)("span",{className:"text-lg",children:{success:"✅",error:"❌",info:"ℹ️"}[s]}),(0,a.jsx)("p",{className:"text-gray-800 font-semibold text-sm whitespace-nowrap",children:t})]})}):null}function p(e){let{onLogin:t,onGuest:s}=e,[o,n]=(0,r.useState)(!1),[l,i]=(0,r.useState)({name:"",phone:"",password:""}),[d,c]=(0,r.useState)(!1),[x,m]=(0,r.useState)({visible:!1,message:"",type:"error"}),u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";m({visible:!0,message:e,type:t})},p=async e=>{e.preventDefault(),c(!0);try{let e;if((e=o?await h.registerCustomer({name:l.name,phone:l.phone,password:l.password}):await h.login(l.phone,l.password))&&e.success){var s,a,r;let o=e.customer,n={name:o.Nome||o.name||l.name||"Cliente",phone:o.Telefone||o.phone||l.phone,points:Number(o.Pontos_Fidelidade||o.points||0),inviteCode:o.Codigo_Convite||o.inviteCode||"---",favorites:o.favorites||[],address:(null===(s=o.savedAddress)||void 0===s?void 0:s.fullAddress)||"",tower:(null===(a=o.savedAddress)||void 0===a?void 0:a.torre)||"",apt:(null===(r=o.savedAddress)||void 0===r?void 0:r.apto)||"",isGuest:!1};localStorage.setItem("donaCapivaraUser",JSON.stringify(n)),t(n)}else u((null==e?void 0:e.message)||"Erro desconhecido no servidor.")}catch(e){console.error("Auth Error:",e),u("Erro de conex\xe3o. Verifique sua internet ou contate o suporte.")}finally{c(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-[#FF4B82] to-[#FF9E3D] flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[(0,a.jsx)(g,{message:x.message,type:x.type,isVisible:x.visible,onClose:()=>m({...x,visible:!1})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center w-full z-10",children:[(0,a.jsx)("div",{className:"w-48 h-48 bg-white/20 backdrop-blur-sm rounded-full p-4 shadow-2xl mb-6 animate-[bounce_3s_infinite]",children:(0,a.jsx)("img",{src:"https://scontent.fbfh15-1.fna.fbcdn.net/v/t39.30808-6/553847420_122119716686977479_5765612005474135840_n.jpg?_nc_cat=106&ccb=1-7&_nc_sid=6ee11a&_nc_eui2=AeGYoc5isZ54tqRS9amnP5SCrZ2LrwbPbzetnYuvBs9vN1G5RcQEGZRDdeCL9Q99nvGeMO_CB1dFMf07RkNxEJTE&_nc_ohc=hcHJayRqLZ4Q7kNvwEPwg3T&_nc_oc=AdlpVEklIt7p0ps6yE1IGlHMOcxHdaXJvYQaG3QYos4E_VYesJEuk2vVH1l8uSHny-KqJTyQlfy6VoKp3_kP54OU&_nc_zt=23&_nc_ht=scontent.fbfh15-1.fna&_nc_gid=oFWMehzimRYe6j488AFUpA&oh=00_AfgFXpSoIwMCbAqJFqThZeoRNbaCVMVezlapdk23SbxRmA&oe=6927E03A",alt:"Dona Capivara Logo",className:"w-full h-full object-cover rounded-full border-4 border-white shadow-inner"})}),(0,a.jsx)("h1",{className:"text-white text-4xl font-extrabold drop-shadow-lg tracking-wide",children:"Dona Capivara"})]}),(0,a.jsxs)("div",{className:"w-full max-w-sm bg-white rounded-[2rem] shadow-2xl p-8 z-10 mb-4",children:[(0,a.jsxs)("div",{className:"flex mb-6 bg-gray-100 p-1 rounded-xl",children:[(0,a.jsx)("button",{type:"button",onClick:()=>n(!1),className:"flex-1 py-2.5 text-sm font-bold rounded-lg transition-all ".concat(o?"text-gray-400":"bg-white text-[#FF4B82] shadow-sm"),children:"Entrar"}),(0,a.jsx)("button",{type:"button",onClick:()=>n(!0),className:"flex-1 py-2.5 text-sm font-bold rounded-lg transition-all ".concat(o?"bg-white text-[#FF4B82] shadow-sm":"text-gray-400"),children:"Cadastrar"})]}),(0,a.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[o&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-xs font-bold text-gray-400 ml-1",children:"NOME"}),(0,a.jsx)("input",{type:"text",placeholder:"Seu Nome",required:o,className:"w-full p-3.5 bg-gray-50 border border-gray-200 rounded-xl text-sm outline-none focus:border-[#FF4B82]",value:l.name,onChange:e=>i({...l,name:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-xs font-bold text-gray-400 ml-1",children:"TELEFONE"}),(0,a.jsx)("input",{type:"tel",placeholder:"(XX) 99999-9999",required:!0,className:"w-full p-3.5 bg-gray-50 border border-gray-200 rounded-xl text-sm outline-none focus:border-[#FF4B82]",value:l.phone,onChange:e=>i({...l,phone:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-xs font-bold text-gray-400 ml-1",children:"SENHA"}),(0,a.jsx)("input",{type:"password",placeholder:"******",required:!0,className:"w-full p-3.5 bg-gray-50 border border-gray-200 rounded-xl text-sm outline-none focus:border-[#FF4B82]",value:l.password,onChange:e=>i({...l,password:e.target.value})})]}),(0,a.jsx)("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-[#FF4B82] to-[#FF9E3D] text-white font-bold py-4 rounded-xl shadow-lg shadow-orange-200 mt-4 disabled:opacity-70",children:d?"Processando...":o?"Criar Conta":"Acessar Conta"})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsx)("button",{onClick:s,className:"text-gray-400 text-xs font-bold hover:text-[#FF4B82]",children:"QUERO APENAS OLHAR O CARD\xc1PIO"})})]})]})}function b(e){let{user:t,onBack:s}=e,[o,n]=(0,r.useState)([]),[l,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(null==t?void 0:t.id)?h.getCustomerOrders(t.id).then(e=>n(e)).finally(()=>i(!1)):i(!1)},[t]);let d=e=>{try{return new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(t){return e}},c=e=>{let t=(e||"").toLowerCase();return t.includes("entregue")?"bg-green-100 text-green-600":t.includes("cancelado")?"bg-red-100 text-red-600":"bg-orange-100 text-orange-600"};return(0,a.jsxs)("div",{className:"min-h-screen bg-[#F5F6FA] pb-24",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-[#FF4B82] to-[#FF9E3D] text-white p-6 pt-12 pb-12 rounded-b-[30px] shadow-lg sticky top-0 z-10",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:s,className:"bg-white/20 p-2 rounded-full hover:bg-white/30 transition",children:"←"}),(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Hist\xf3rico de Pedidos"})]})}),(0,a.jsx)("div",{className:"p-6 -mt-6 space-y-4",children:l?(0,a.jsxs)("div",{className:"text-center text-gray-400 mt-10 flex flex-col items-center gap-2",children:[(0,a.jsx)("span",{className:"animate-spin h-6 w-6 border-2 border-[#FF4B82] border-t-transparent rounded-full"}),"Carregando..."]}):0===o.length?(0,a.jsx)("div",{className:"text-center text-gray-400 mt-10",children:"Nenhum pedido encontrado. \uD83D\uDCE6"}):o.map(e=>(0,a.jsxs)("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 animate-in slide-in-from-bottom-4 duration-500",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("span",{className:"text-xs font-bold text-gray-400",children:["#",e.id.slice(0,8)]}),(0,a.jsx)("span",{className:"text-xs font-bold px-2 py-1 rounded-full ".concat(c(e.status)),children:e.status})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:d(e.date)}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:e.paymentMethod})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center border-t border-gray-50 pt-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Total"}),(0,a.jsxs)("span",{className:"text-lg font-bold text-[#FF4B82]",children:["R$ ",e.total.toFixed(2)]})]})]},e.id))})]})}function f(e){let{product:t,onBack:s,onAddToCart:o}=e,[n,l]=(0,r.useState)(1);return(0,a.jsxs)("div",{className:"min-h-screen bg-white flex flex-col relative animate-in slide-in-from-right duration-300",children:[(0,a.jsx)("button",{onClick:s,className:"fixed top-4 left-4 z-50 bg-white/90 backdrop-blur-md p-3 rounded-full shadow-lg border border-gray-100 hover:scale-110 transition active:scale-95","aria-label":"Voltar",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-800",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,a.jsxs)("div",{className:"relative h-[40vh] w-full bg-gray-200 flex-shrink-0",children:[(0,a.jsx)("img",{src:t.imagem||"https://via.placeholder.com/500",alt:t.nome,className:"w-full h-full object-cover"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-black/10 via-transparent to-black/5"})]}),(0,a.jsxs)("div",{className:"flex-1 p-6 flex flex-col -mt-8 bg-white rounded-t-[35px] relative z-10 shadow-[0_-10px_40px_rgba(0,0,0,0.05)]",children:[(0,a.jsx)("div",{className:"w-12 h-1.5 bg-gray-200 rounded-full mx-auto mb-6 opacity-50"}),(0,a.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800 w-3/4 leading-tight",children:t.nome}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("span",{className:"text-2xl font-bold text-[#FF4B82]",children:["R$ ",t.price.toFixed(2)]})})]}),(0,a.jsx)("div",{className:"flex gap-3 mb-6 overflow-x-auto pb-2 scrollbar-hide",children:[{icon:"\uD83D\uDD25",label:"Calorias",val:t.calorias,color:"orange"},{icon:"⚖️",label:"Peso",val:t.peso,color:"blue"},{icon:"⚡",label:"Entrega",val:t.tempo||"Imediata",color:"green"}].map((e,t)=>(0,a.jsxs)("div",{className:"bg-".concat(e.color,"-50 border border-").concat(e.color,"-100 px-3 py-2 rounded-xl flex items-center gap-3 min-w-[110px]"),children:[(0,a.jsx)("span",{className:"text-xl",children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:e.label}),(0,a.jsx)("p",{className:"text-sm font-bold text-".concat(e.color,"-500"),children:e.val})]})]},t))}),(0,a.jsx)("h3",{className:"font-bold text-gray-800 mb-2",children:"Descri\xe7\xe3o"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm leading-relaxed mb-6",children:t.descricao||"Sabor inigual\xe1vel da Dona Capivara."}),(0,a.jsx)("h3",{className:"font-bold text-gray-800 mb-2",children:"Ingredientes"}),(0,a.jsx)("p",{className:"text-gray-500 text-xs leading-relaxed mb-24 bg-gray-50 p-4 rounded-xl border border-gray-100",children:t.ingredientes||"Informa\xe7\xe3o n\xe3o dispon\xedvel."}),(0,a.jsxs)("div",{className:"fixed bottom-0 left-0 w-full bg-white border-t border-gray-100 p-4 pb-8 flex items-center gap-4 z-40 shadow-[0_-5px_20px_rgba(0,0,0,0.05)]",children:[(0,a.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-xl px-3 py-2 h-14",children:[(0,a.jsx)("button",{onClick:()=>{n>1&&l(e=>e-1)},className:"w-8 text-xl font-bold text-gray-500 hover:text-[#FF4B82] transition",children:"-"}),(0,a.jsx)("span",{className:"w-8 text-center font-bold text-gray-800 text-lg",children:n}),(0,a.jsx)("button",{onClick:()=>{n<t.estoque&&l(e=>e+1)},className:"w-8 text-xl font-bold text-gray-500 hover:text-[#FF4B82] transition",children:"+"})]}),(0,a.jsxs)("button",{onClick:()=>o(t,n),className:"flex-1 h-14 bg-gradient-to-r from-[#FF4B82] to-[#FF9E3D] text-white font-bold rounded-xl shadow-lg shadow-orange-200 hover:opacity-90 transition flex justify-between items-center px-6 active:scale-95",children:[(0,a.jsx)("span",{children:"Adicionar"}),(0,a.jsxs)("span",{className:"bg-white/20 px-2 py-1 rounded text-sm",children:["R$ ",(t.price*n).toFixed(2)]})]})]})]})]})}function v(e){let{activeTab:t,onTabChange:s,cartCount:r,favoriteCount:o,isGuest:n}=e,l=[{id:"home",label:"In\xedcio",icon:"\uD83C\uDFE0"},{id:"favorites",label:"Favoritos",icon:"❤️",badge:o},{id:"cart",label:"Carrinho",icon:"\uD83D\uDED2",badge:r},{id:"profile",label:"Perfil",icon:"\uD83D\uDC64"}].filter(e=>!(n&&"profile"===e.id));return(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 shadow-[0_-5px_10px_rgba(0,0,0,0.05)] z-50 h-16",children:(0,a.jsx)("div",{className:"flex justify-around items-center h-full max-w-md mx-auto",children:l.map(e=>{let r=t===e.id;return(0,a.jsxs)("button",{onClick:()=>s(e.id),className:"relative flex flex-col items-center justify-center w-full h-full transition-colors duration-200 ".concat(r?"text-[#FF4B82]":"text-gray-400 hover:text-gray-600"),children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{className:"text-2xl ".concat(r?"scale-110 transform":""," transition-transform"),children:e.icon}),void 0!==e.badge&&e.badge>0&&(0,a.jsx)("span",{className:"absolute -top-2 -right-3 bg-[#FF4B82] text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full min-w-[18px] flex justify-center shadow-sm border border-white",children:e.badge})]}),(0,a.jsx)("span",{className:"text-[10px] font-medium mt-1",children:e.label}),r&&(0,a.jsx)("span",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-8 h-0.5 bg-gradient-to-r from-[#FF4B82] to-[#FF9E3D] rounded-b-md"})]},e.id)})})})}function j(){let[e,t]=(0,r.useState)(null),[s,o]=(0,r.useState)("home"),[n,l]=(0,r.useState)([]),[i,u]=(0,r.useState)([]),[j,N]=(0,r.useState)([]),[w,y]=(0,r.useState)([]),[F,C]=(0,r.useState)([]),[D,E]=(0,r.useState)(null),[_,A]=(0,r.useState)({visible:!1,message:"",type:"success",ts:0}),S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";A({visible:!0,message:e,type:t,ts:Date.now()})};(0,r.useEffect)(()=>{let e=localStorage.getItem("donaCapivaraUser");if(e)try{let s=JSON.parse(e);t(s),s.favorites&&C(s.favorites)}catch(e){localStorage.removeItem("donaCapivaraUser")}h.fetchCatalogData().then(e=>{l(e.products),u(e.categories),N(e.banners)})},[]);let k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;y(s=>{let a;let r=s.find(t=>t.id===e.id);return(r?r.quantity:0)+t>e.estoque?(S("Estoque insuficiente!","error"),s):(a=r?s.map(s=>s.id===e.id?{...s,quantity:s.quantity+t}:s):[...s,{...e,quantity:t}],S("Adicionado!","success"),a)})},B=s=>{C(a=>{let r;if(a.includes(s)?(S("Removido dos favoritos","info"),r=a.filter(e=>e!==s)):(S("Salvo nos favoritos!","success"),r=[...a,s]),e&&!e.isGuest){h.syncFavorites(e.phone,r);let s={...e,favorites:r};t(s),localStorage.setItem("donaCapivaraUser",JSON.stringify(s))}return r})},T=async s=>{let a={...s,customer:(null==e?void 0:e.isGuest)?{id:"GUEST",name:s.customer.name}:{...s.customer,id:e.id_Cliente||e.id}};S("Enviando pedido...","info");try{let r=await h.submitOrder(a);if(r&&r.success){let a=(r.idVenda||"PENDENTE").slice(0,8).toUpperCase(),n="*Novo Pedido Dona Capivara* \uD83D\uDC39\nID: ".concat(a,"\n----------------\n");s.cart.forEach(e=>n+="".concat(e.quantity,"x ").concat(e.nome,"\n")),n+="\n*Total: R$ ".concat(s.total.toFixed(2),"*\nCliente: ").concat(s.customer.name,"\n"),s.customer.fullAddress?n+="Endere\xe7o: ".concat(s.customer.fullAddress,"\n"):n+="Torre: ".concat(s.customer.details.torre," - Apto: ").concat(s.customer.details.apto,"\n"),n+="Pgto: ".concat(s.paymentMethod,"\n");let l=0;if(e.isGuest||(l=Math.floor(s.total)+(s.bonusPoints||0),n+="✨ Pontos Ganhos: +".concat(l,"\n")),window.open("https://wa.me/5541991480096?text=".concat(encodeURIComponent(n)),"_blank"),S("Pedido ".concat(a," enviado!"),"success"),y([]),o("home"),!e.isGuest){let a={...e,points:(e.points||0)+l,savedAddress:{torre:s.customer.details.torre,apto:s.customer.details.apto,fullAddress:s.customer.fullAddress}};t(a),localStorage.setItem("donaCapivaraUser",JSON.stringify(a))}}else S(r.message||"Erro ao salvar.","error")}catch(e){S("Erro de conex\xe3o.","error")}};return e?(0,a.jsxs)("main",{className:"min-h-screen bg-[#F5F6FA] relative",children:[(0,a.jsx)(g,{message:_.message,type:_.type,isVisible:_.visible,onClose:()=>A({..._,visible:!1})}),D?(0,a.jsx)(f,{product:D,onBack:()=>E(null),onAddToCart:(e,t)=>{k(e,t),E(null)}}):(0,a.jsxs)(a.Fragment,{children:["home"===s&&(0,a.jsx)(d,{user:e,products:n,categories:i,banners:j,favorites:F,onAddToCart:k,onToggleFavorite:B,onProductClick:E,onHeaderAction:()=>{let s=(null==e?void 0:e.isGuest)?"fazer login":"sair";confirm("Deseja ".concat(s,"?"))&&(localStorage.removeItem("donaCapivaraUser"),t(null),C([]))}}),"favorites"===s&&(0,a.jsx)(m,{products:n,favorites:F,onAddToCart:k,onToggleFavorite:B,onProductClick:E}),"cart"===s&&(0,a.jsx)(c,{cart:w,user:e,addToCart:k,removeFromCart:e=>y(t=>t.filter(t=>t.id!==e)),onSubmitOrder:T}),"profile"===s&&!e.isGuest&&(0,a.jsx)(x,{user:e,onLogout:()=>{localStorage.removeItem("donaCapivaraUser"),t(null),C([])},onNavigate:o}),"orders"===s&&!e.isGuest&&(0,a.jsx)(b,{user:e,onBack:()=>o("profile")}),"orders"!==s&&(0,a.jsx)(v,{activeTab:s,onTabChange:o,cartCount:w.length,favoriteCount:F.length,isGuest:e.isGuest})]})]}):(0,a.jsx)(p,{onLogin:e=>{t(e),e.favorites&&Array.isArray(e.favorites)&&C(e.favorites)},onGuest:()=>t({isGuest:!0})})}}},function(e){e.O(0,[703,971,69,744],function(){return e(e.s=9836)}),_N_E=e.O()}]);