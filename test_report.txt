
> dona-capivara@0.1.0 test
> jest --ci

  console.warn
    Jâ”œÃ­ estâ”œÃ­ processando

    [0m [90m 185 |[39m         [36mconst[39m handleSubmit [33m=[39m () [33m=>[39m {
     [90m 186 |[39m             [36mif[39m (isSubmitting) {
    [31m[1m>[22m[39m[90m 187 |[39m                 console[33m.[39mwarn([32m'Jâ”œÃ­ estâ”œÃ­ processando'[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 188 |[39m                 [36mreturn[39m[33m;[39m
     [90m 189 |[39m             }
     [90m 190 |[39m             isSubmitting [33m=[39m [36mtrue[39m[33m;[39m[0m

      at warn (__tests__/checkout.test.ts:187:25)
      at Object.handleSubmit (__tests__/checkout.test.ts:195:9)

FAIL __tests__/checkout.test.ts
  WhatsApp Integration - Checkout Flow
    Sanitizaâ”œÂºâ”œÃºo de Inputs
      Ã”ÃªÃœ deve remover caracteres especiais de markdown (2 ms)
      Ã”ÃªÃœ deve lidar com strings vazias (1 ms)
      â”œÃ¹ deve converter null/undefined para string vazia (2 ms)
    Formataâ”œÂºâ”œÃºo de Moeda BRL
      â”œÃ¹ deve formatar valores corretamente (46 ms)
      â”œÃ¹ deve lidar com valores negativos (1 ms)
    Construâ”œÂºâ”œÃºo de Mensagem WhatsApp
      Ã”ÃªÃœ deve incluir todos os campos obrigatâ”œâ”‚rios (1 ms)
      Ã”ÃªÃœ deve incluir sabores do Mix Gourmet (1 ms)
      Ã”ÃªÃœ deve incluir descontos separados (cupom e pontos)
    Encoding de URL
      Ã”ÃªÃœ deve codificar corretamente caracteres especiais
      Ã”ÃªÃœ deve preservar emojis apâ”œâ”‚s encoding
    Validaâ”œÂºâ”œÃºo de Dados
      Ã”ÃªÃœ deve converter ID numâ”œÂ®rico para string
      Ã”ÃªÃœ deve lidar com ID undefined
  Idempotâ”œÂ¬ncia e Estado
    Ã”ÃªÃœ deve prevenir dupla submissâ”œÃºo (21 ms)
  Configuraâ”œÂºâ”œÃºo e Constantes
    Ã”ÃªÃœ deve usar variâ”œÃ­vel de ambiente ou fallback (1 ms)
    Ã”ÃªÃœ deve ter constantes definidas

  Ã”Ã¹Ã… WhatsApp Integration - Checkout Flow Ã”Ã‡â•‘ Sanitizaâ”œÂºâ”œÃºo de Inputs Ã”Ã‡â•‘ deve converter null/undefined para string vazia

    expect(received).toBe(expected) // Object.is equality

    Expected: "null"
    Received: ""

      21 |
      22 |         it('deve converter null/undefined para string vazia', () => {
    > 23 |             expect(sanitize(null as any)).toBe('null');
         |                                           ^
      24 |             expect(sanitize(undefined as any)).toBe('undefined');
      25 |         });
      26 |     });

      at Object.toBe (__tests__/checkout.test.ts:23:43)

  Ã”Ã¹Ã… WhatsApp Integration - Checkout Flow Ã”Ã‡â•‘ Formataâ”œÂºâ”œÃºo de Moeda BRL Ã”Ã‡â•‘ deve formatar valores corretamente

    expect(received).toBe(expected) // Object.is equality

    Expected: "R$ 10,50"
    Received: "R$â”¬Ã¡10,50"

      34 |
      35 |         it('deve formatar valores corretamente', () => {
    > 36 |             expect(formatCurrency(10.5)).toBe('R$ 10,50');
         |                                          ^
      37 |             expect(formatCurrency(1000)).toBe('R$ 1.000,00');
      38 |             expect(formatCurrency(0.99)).toBe('R$ 0,99');
      39 |         });

      at Object.toBe (__tests__/checkout.test.ts:36:42)

  Ã”Ã¹Ã… WhatsApp Integration - Checkout Flow Ã”Ã‡â•‘ Formataâ”œÂºâ”œÃºo de Moeda BRL Ã”Ã‡â•‘ deve lidar com valores negativos

    expect(received).toBe(expected) // Object.is equality

    Expected: "-R$ 5,50"
    Received: "-R$â”¬Ã¡5,50"

      40 |
      41 |         it('deve lidar com valores negativos', () => {
    > 42 |             expect(formatCurrency(-5.5)).toBe('-R$ 5,50');
         |                                          ^
      43 |         });
      44 |     });
      45 |

      at Object.toBe (__tests__/checkout.test.ts:42:42)

Test Suites: 1 failed, 1 total
Tests:       3 failed, 12 passed, 15 total
Snapshots:   0 total
Time:        1.601 s
Ran all test suites.
